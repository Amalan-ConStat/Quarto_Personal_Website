{
  "hash": "b590d4a08bee3efc01a9aff01842969b",
  "result": {
    "markdown": "---\ntitle: 'Week 24: Meteorite Data'\ndate: '2019-06-10'\ncategories:\n  - TidyTuesday\n  - 2019\nimage: featured.png\ndraft: false\nnumber-sections: false\nformat:\n  html:\n    fig-cap-location: bottom\nresources: \n  - \"featured.png\"\n---\n\n\n\n\nThis week has data for Meteors from 8th century to year 2013(well 2101 is an error).\n\nSo I have used the packages tidyverse,gganimate,maps and ggthemes to make this more \ninteresting. There are three plots which I have generated, two of them are inspired \nby others. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeteorites <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-06-11/meteorites.csv\")\n\nlibrary(tidyverse)\nlibrary(gganimate)\nlibrary(maps)\nlibrary(ggthemes)\n```\n:::\n\n\n# Meteorites over the Year\n\nBased on the below tweet I was inspired to creata a similar plot which is animated by\nyears.\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n{{% tweet \"1138187182559170560\" %}}\n```\n:::\n:::\n\n\nFrames change is based on year, and meteors which have missing values are dropped.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeteorites_rm<-remove_missing(meteorites)\n\nworld <- ggplot() + theme_map()+\n         borders(\"world\", colour = \"#353535\", fill = \"#74e04a\") \n\nplot1<-world+geom_point(data=meteorites_rm,x=meteorites_rm$long,y=meteorites_rm$lat,\n                        color=\"#e20e06\")+\n             transition_states(meteorites_rm$year,transition_length = 1,state_length = 1)+\n             theme(plot.title = element_text(color = \"black\", \n                                           size = 15, \n                                           face = \"bold\"),\n                   panel.background = element_rect(fill = \"#5e8bed\")) +\n             ggtitle(\"Meteors Falling from the sky by Name Type\",subtitle = \"Year:{closest_state}\")\n\nanimate(plot1,nframes=253,fps=1,detail = 1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/meteorites over the year-1.gif)\n:::\n:::\n\n\n# Meteorites and Classes \n\nA Bar plot which changes for the top 5 classes based on their counts after the \nyear 1999. This plot is based on the blog post published in Rbloggers. This type \nis a very popular animated bar plot. \n\n[Link for the Blog post](https://www.r-bloggers.com/how-to-build-animated-bar-plots-using-r/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest<-meteorites%>%\n          subset(year >= 2000 & year < 2101) %>%\n          group_by(year,class) %>%\n          count(class) %>%\n          group_by(year)%>%     \n          mutate(rank=rank(-n),\n                 value_lbl=paste0(\"\",n)) %>%\n          group_by(class) %>%\n          filter(rank <=5) %>%\n          ungroup()\n\nplot3<-ggplot(test, aes(rank, group = class, \n              fill = as.factor(class), color = as.factor(class))) +\n       geom_tile(aes(y = n/2,height = n,width = 0.9), alpha = 0.8, color = NA) +\n       geom_text(aes(y = 0, label = paste(class, \" \")), vjust = 0.2, hjust = 1) +\n       geom_text(aes(y=n,label = value_lbl, hjust=0)) +\n       coord_flip(clip = \"off\", expand = FALSE) +\n       scale_y_continuous(labels = scales::comma) +\n       scale_x_reverse() +\n       guides(color = FALSE, fill = FALSE) +\n       theme(axis.line=element_blank(),\n             axis.text.x=element_blank(),\n             axis.text.y=element_blank(),\n             axis.ticks=element_blank(),\n             axis.title.x=element_blank(),\n             axis.title.y=element_blank(),\n             legend.position=\"none\",\n             panel.background=element_blank(),\n             panel.border=element_blank(),\n             panel.grid.major=element_blank(),\n             panel.grid.minor=element_blank(),\n             panel.grid.major.x = element_line( size=.1, color=\"grey\" ),\n             panel.grid.minor.x = element_line( size=.1, color=\"grey\" ),\n             plot.title=element_text(size=25, hjust=0.5, face=\"bold\", colour=\"grey\", vjust=-1),\n             plot.subtitle=element_text(size=18, hjust=0.5, face=\"italic\", color=\"grey\"),\n             plot.caption =element_text(size=8, hjust=0.5, face=\"italic\", color=\"grey\"),\n             plot.background=element_blank(),\n             plot.margin = margin(2,2, 2, 4, \"cm\")) +\n       transition_states(year, transition_length = 3, state_length = 2) +\n  view_follow(fixed_x = TRUE)  +\n  labs(title = 'Meteorites Classes by Year: {closest_state}',  \n       subtitle  =  \"Top 5 Classes\") \n\n# For GIF\nanimate(plot3, nframes=200, fps = 20) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/meteorites and classes-1.gif)\n:::\n:::\n\n\nBelow is the same plot but not animated, therefore we can understand patiently\nhow the top 5 classes counts change after year 1999.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest %>%\n     ggplot(.,aes(x=class,y=n,label=rank,fill=class))+geom_col()+\n     facet_wrap(~factor(year))+geom_text(vjust=-0.5)+\n     geom_text(aes(label=n),vjust=1)+\n     ggtitle(\"Meteors class count from 2000 to 2013\",subtitle = \"Top 5 Ranks\")+\n     scale_y_continuous(expand = c(0,75))+theme_dark()+\n     theme(axis.text.x = element_text(angle = 45))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/meteorites and classes jitter plot-1.png){width=1152}\n:::\n:::\n\n\nSo I posted a tweet about the Meteor data for week 24 of #TidyTuesday.\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n{{% tweet \"1138476351453913090\" %}}\n```\n:::\n:::\n\n\n[GitHub Code](https://github.com/Amalan-ConStat/TidyTuesday/tree/master/2019/Week24)\n\n*THANK YOU*\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}