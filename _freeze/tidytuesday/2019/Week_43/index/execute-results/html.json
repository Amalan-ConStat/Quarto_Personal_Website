{
  "hash": "0ec65505387d189ff745227f96e49d6b",
  "result": {
    "markdown": "---\ntitle: 'Week 43: Horror Movies'\ndate: '2019-10-22'\ncategories:\n  - TidyTuesday\n  - 2019\nimage: featured.png\ndraft: false\nnumber-sections: false\nformat:\n  html:\n    fig-cap-location: bottom\nresources: \n  - \"featured.png\"\n---\n\n\n\n\n[Data](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-10-22) is for \nWeek 43 under the title Horror Movies. Have not done any plotting for TidyTuesday for some time or \nto be exact more than two months. So here I am trying out d3 visualisation in R.\n\nHelpful packages for this post are 'd3rain' and 'd3treeR'. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load the packages\nlibrary(d3rain)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(splitstackshape)\nlibrary(d3treeR)\nlibrary(treemap)\n\n# load the data\nhorror_movies <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-22/horror_movies.csv\")\n```\n:::\n\n\n## Organize Data\n\nGenuine look indicates that data is fine. Well if you look closer there are some changes that need to\nbe done to make the most of it. I have simpler dreams such as drawing two plots which would make sense.\n\n1. Rain plot where Horror movie distribution occurs by each month for days.(Easier to look at the plot than\ntry to grasp from what I am telling)\n\n2. Tree map which would indicate how the Genres of the movies are assigned. It is my intention \nto understand if there is a hierarchy in this genre naming as some movies have multiple assignments.\n\nTo achieve above set plots some changes in the two columns 'genres' and 'release_date' are necessary;\nprecisely we have to break one column into multiples based on a pattern for former and based on a condition\nfor latter.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nRainDataFormat <- cSplit(horror_movies,'release_date','-',drop=TRUE)\n\nRainDataFormat <- RainDataFormat %>% \n                    rename(Day = release_date_1) %>%\n                    rename(Month = release_date_2) %>%\n                    rename(Year = release_date_3) %>%\n                    select(Year,Month,Day,title)\n\nRainDataFormat$Year[is.na(RainDataFormat$Year)==TRUE] <-\n    stringr::str_remove(RainDataFormat$Day[is.na(RainDataFormat$Year)==TRUE],\"20\")\n\nclass(RainDataFormat$Year) <- \"numeric\"\nclass(RainDataFormat$Day) <- \"numeric\"\n\nRainDataFormat$Day[RainDataFormat$Day>31] <- NA\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTreeDataFormat <- cSplit(horror_movies,'genres','|',drop=TRUE)\n\nTreeDataFormat <- TreeDataFormat %>%\n                    rename(First_Choice = genres_1) %>%\n                    rename(Second_Choice = genres_2) %>%\n                    rename(Third_Choice = genres_3)\n\nTreeDataFormat <- TreeDataFormat %>%\n                  group_by(First_Choice,Second_Choice,Third_Choice) %>%\n                  mutate(\"Counts\" = n()) %>%\n                  select(First_Choice,Second_Choice,Third_Choice,Counts) %>%\n                  unique()\n```\n:::\n\n\n\n## Rain Graph\n\nCompared how horror movies have increased compared to year 2017 from year 2012. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nRainDataFormat <- RainDataFormat[complete.cases(RainDataFormat)]\nlevels(RainDataFormat$Month) <- c(\"Jan\",\"Feb\",\"Mar\",\"Apr\",\n                                  \"May\",\"Jun\",\"Jul\",\"Aug\",\n                                  \"Sep\",\"Oct\",\"Nov\",\"Dec\")\n\nRainDataFormat[Year==12] %>%\n    d3rain(Day,Month,toolTip = Day,title = \"Days vs Months for Year 2012\") %>%\n    drip_settings(dripSequence = 'iterate',\n                  ease = 'linear',\n                  jitterWidth = 25,\n                  dripSpeed = 500,\n                  dripFill = 'steelblue') %>% \n    chart_settings(fontFamily = 'times',\n                   yAxisTickLocation = 'left')\n\nRainDataFormat[Year==17] %>%\n    d3rain(Day,Month,toolTip = Day,title = \"Days vs Months for Year 2017\") %>%\n    drip_settings(dripSequence = 'iterate',\n                  ease = 'linear',\n                  jitterWidth = 25,\n                  dripSpeed = 500,\n                  dripFill = 'red') %>% \n    chart_settings(fontFamily = 'times',\n                   yAxisTickLocation = 'left')\n```\n:::\n\n\n## Tree map\n\nSome movies have more than three genres assigned to them. So here is the tree map to plot them\nin choice order for genre.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTreeData <- treemap(\n                    TreeDataFormat,\n                    index=c(\"First_Choice\", \"Second_Choice\",'Third_Choice'),\n                    vSize=\"Counts\",\n                    vColor=\"Counts\",\n                    type=\"value\"\n                    )\n\nd3tree3(TreeData,rootname = \"Choices\")\n```\n:::\n\n\n\n*THANK YOU*\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}